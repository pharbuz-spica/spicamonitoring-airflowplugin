{
    "$schema": "http://json-schema.org/draft-07/schema#",
    "type": "object",
    "title": "UI Section",
    "$id": "ui.json",
    "$$target": "UI section",
    "definitions": {
        "aggregation_type": {
            "$$target": "aggregation_type",
            "$id": "aggregation_type",
            "title": "Aggregation type",
            "type": "string",
            "enum": ["MIN", "MAX", "AVG", "SUM", "COUNT", "P50", "P90", "min", "max", "avg", "sum", "count", "p50", "p90", "Min", "Max", "Avg", "Sum", "Count"]
        },
        "mergeaggregation_type": {
            "$$target": "mergeaggregation_type",
            "$id": "mergeaggregation_type",
            "title": "Merge-aggregation type",
            "type": "string",
            "enum": ["MIN", "MAX", "AVG", "SUM", "min", "max", "avg", "sum", "Min", "Max", "Avg", "Sum"]
        }
    },
    "create_snippet": true,
    "properties": {
        "keyMetrics": {
            "create_snippet": true,
            "type": "array",
            "minItems": 0,
            "maxItems": 2,
            "items": {
                "create_snippet": true,
                "type": "object",
                "required": ["key"],
                "properties": {
                    "key": {
                        "type": "string",
                        "minLength": 1
                    },
                    "aggregation":  {
                        "description": "Aggregation type",
                        "$ref": "#/definitions/aggregation_type"
                    },
                    "mergeaggregation":  {
                        "$ref": "#/definitions/mergeaggregation_type"
                    },
                    "displayname": {
                        "type": "string",
                        "minLength": 1
                    },
                    "unit": {
                        "$ref": "units.json"
                    }
                }
            }
        },
        "keycharts": {
            "description": "Charts in first chart group in CD instance",
            "$ref": "chart.json"
        },
        "charts": {
            "description": "Visible in CD instance, in it's own defined group",
            "$ref": "chart.json"
        }
    }
}
